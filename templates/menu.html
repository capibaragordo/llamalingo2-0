<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Men√∫ - Llamalingo</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='menu.css') }}">
  <source src="{{ url_for('static', filename='Rising Light.mp4') }}" type="video/mp4">


  <!-- Fuente retro -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  
  <style>
    .video-estafa {
      background-color: #2e003f;
      padding: 20px;
      border-radius: 12px;
      border: 3px dashed #ff66cc;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 0 10px #ff66cc;
      color: #ffeefc;
      font-family: 'Press Start 2P', monospace;
    }

    .video-estafa h2 {
      font-size: 14px;
      margin-bottom: 15px;
    }

    .video-estafa iframe {
      width: 100%;
      height: 400px;
      border-radius: 12px;
      border: 2px solid #ff66cc;
      background-color: #1a001f;
    }

    .noticias-scroll {
      background-color: #4b0073;
      color: #ffeefc;
      padding: 10px 0;
      margin-top: 30px;
      border: 2px dashed #ff66cc;
      overflow: hidden;
      border-radius: 10px;
    }

    .marquee {
      display: inline-block;
      white-space: nowrap;
      animation: scroll-left 25s linear infinite;
      font-size: 12px;
      padding-left: 100%;
    }

    @keyframes scroll-left {
      from {
        transform: translateX(0%);
      }
      to {
        transform: translateX(-100%);
      }
    }
  </style>

  <script>
    function mostrarSeccion(id) {
      document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activa'));
      document.getElementById(id).classList.add('activa');
      document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
      event.target.classList.add('active');
    }
  </script>
</head>


<body>
  <video autoplay muted loop id="video-fondo">
    <source src="{{ url_for('static', filename='Rising Light.mp4') }}" type="video/mp4">
  </video>

  <div id="video-overlay"></div>



  <!-- Sidebar contra√≠ble -->
  <aside class="sidebar">
    
    <ul>
      <li class="active" onclick="mostrarSeccion('inicio')">
        <span class="icon">üè†</span>
        <span class="label">Inicio</span>
      </li>
      <li onclick="mostrarSeccion('juegos')">
        <span class="icon">üéÆ</span>
        <span class="label">Juegos</span>
      </li>
      <li onclick="mostrarSeccion('repasar')">
        <span class="icon">üìö</span>
        <span class="label">Repasar</span>
      </li>
      <li onclick="mostrarSeccion('perfil')">
        <span class="icon">üë§</span>
        <span class="label">Perfil</span>
      </li>
    </ul>
  </aside>

  <!-- Contenido principal -->
  <main class="contenido">
    

    <!-- INICIO -->
    <section id="inicio" class="seccion activa">
      <h1>Bienvenido, {{ session['usuario'] }} üëã</h1>
      <p class="frase">Protege tus conocimientos como un verdadero guerrero inca. Aprende a reconocer las trampas digitales.</p>
      
      <!-- Noticias reales -->
      <div id="noticias-container">
        <p>Cargando noticias en tiempo real...</p>
      </div>

      <!-- Tarjetas de tipos de estafa -->
      <div class="tarjetas-estafa">
        <div class="tarjeta">
          <h3>Phishing</h3>
          <p>Correos o mensajes falsos que buscan robar tu informaci√≥n personal.</p>
        </div>
        <div class="tarjeta">
          <h3>Falsos sorteos</h3>
          <p>Promesas de premios para obtener tus datos o dinero.</p>
        </div>
        <div class="tarjeta">
          <h3>Suplantaci√≥n</h3>
          <p>Alguien se hace pasar por una empresa o amigo para estafarte.</p>
        </div>
      </div>

      <!-- Noticias desplazables -->
      <div class="noticias-scroll">
        <div class="marquee">
          <span>üö® Nueva estafa por WhatsApp detectada - ¬°No compartas c√≥digos! &nbsp;&nbsp;&nbsp;</span>
          <span>üîê Google alerta sobre correos falsos de verificaci√≥n de cuenta &nbsp;&nbsp;&nbsp;</span>
          <span>‚ö†Ô∏è Estafadores se hacen pasar por bancos en llamadas telef√≥nicas &nbsp;&nbsp;&nbsp;</span>
          <span>üõ°Ô∏è Aprende a identificar URLs sospechosas con InkaSafe &nbsp;&nbsp;&nbsp;</span>
        </div>
      </div>
    </section>

    <!-- Otras secciones -->
    <section id="juegos" class="seccion">
      <h1>Juegos</h1>
      <p>Aqu√≠ ir√°n tus juegos tipo Duolingo.</p>
    </section>

    <section id="logros" class="seccion">
      <h1>Logros</h1>
      <p>Logros que desbloquear√°s al completar desaf√≠os.</p>
    </section>

    <section id="repasar" class="seccion">
      <h1>Repasar</h1>
      <p>Temas claves para evitar estafas en el mundo real.</p>
    </section>

    <section id="avance" class="seccion">
      <h1>Avance</h1>
      <p>Tu progreso general en la plataforma.</p>
    </section>

<section id="perfil" class="seccion">
  <h1>Perfil</h1>
  <form id="form-perfil" class="perfil-formulario">
    <label for="nombre">Nombre completo</label>
    <input type="text" id="nombre" name="nombre">

    <label for="usuario">Usuario</label>
    <input type="text" id="usuario" name="usuario">

    <label for="email">Correo electr√≥nico</label>
    <input type="email" id="email" name="email">

    <label for="nueva-clave">Nueva contrase√±a</label>
    <input type="password" id="nueva-clave">

    <label for="confirmar-clave">Confirmar contrase√±a</label>
    <input type="password" id="confirmar-clave">

    <button class="boton-guardar">Guardar cambios</button>
    <p id="mensaje-guardado" style="margin-top: 15px; color: #00ff99; font-size: 10px;"></p>


  </form>

<div style="display: flex; justify-content: center; margin-top: 40px;">
  <a href="{{ url_for('logout') }}">
  <button style="
    font-family: 'Press Start 2P', monospace;
    padding: 14px 24px;
    background: linear-gradient(90deg, #ff2f92, #5b0060);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 12px;
    cursor: pointer;
    box-shadow: 0 0 15px #ff66cc88;
    transition: transform 0.2s, box-shadow 0.3s;
  ">
    üö™ Cerrar sesi√≥n
  </button>
</a>

</div>

</section>



  </main>
  <script>
  async function cargarNoticias() {
    const contenedor = document.getElementById("noticias-container");

    try {
      const urlRSS = 'https://news.google.com/rss/search?q=estafa+digital&hl=es-419&gl=PE&ceid=PE:es';
      const url = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(urlRSS)}`;

      const res = await fetch(url);
      const data = await res.json();

      if (!data.items || data.items.length === 0) {
        contenedor.innerHTML = "<p>No se encontraron noticias recientes.</p>";
        return;
      }

      // Contenedor de noticias con 5 columnas fijas
      let html = `
        <div style="
          display: grid;
          grid-template-columns: repeat(5, 1fr);
          gap: 30px;
          padding: 30px 10px;
        ">
      `;

      // Mostramos hasta 10 noticias
      data.items.slice(0, 10).forEach(noticia => {
        const imagen = "https://cdn-icons-png.flaticon.com/512/21/21601.png";

        html += `
          <div style="
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 250px;
            box-shadow: 0 0 12px rgba(255,255,255,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
          " onmouseover="this.style.transform='scale(1.04)'; this.style.boxShadow='0 0 20px #ff99cc55'" onmouseout="this.style.transform='none'; this.style.boxShadow='0 0 12px rgba(255,255,255,0.05)'">
            <img src="${imagen}" alt="noticia" style="width: 70px; height: 70px; object-fit: contain; margin-bottom: 15px; border-radius: 10px;" />
            <a href="${noticia.link}" target="_blank" style="color: #ffeefc; font-weight: bold; text-decoration: none; font-size: 16px;">
              ${noticia.title}
            </a>
            <p style="font-size: 13px; color: #d4b8f0; margin-top: 10px;">
              üïí ${new Date(noticia.pubDate).toLocaleDateString()}
            </p>
          </div>
        `;
      });

      html += '</div>';
      contenedor.innerHTML = html;

    } catch (error) {
      contenedor.innerHTML = "<p style='color: red;'>Error al cargar las noticias.</p>";
      console.error(error);
    }
  }

  window.addEventListener('DOMContentLoaded', cargarNoticias);
</script>
<script>
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const brillo = Math.min(scrollY / 600, 1); // de 0 a 1
    const elementos = document.querySelectorAll('.contenido, .frase, h1, .tarjeta, .video-estafa, .marquee, #noticias-container');

    elementos.forEach(el => {
      el.style.filter = `brightness(${1 + brillo * 0.8})`;
    });
  });
</script>
<!-- BOT√ìN flotante -->
<div id="boton-feedback" onclick="toggleFeedback()">üí¨</div>

<!-- FORMULARIO flotante -->
<div id="feedback-flotante" class="oculto">
  <form id="form-feedback">
    <div style="position: relative;">
      <h3 style="font-size: 10px; margin-bottom: 10px;">¬øQu√© podemos mejorar?</h3>
      <button type="button" id="cerrar-feedback" onclick="toggleFeedback()" title="Cerrar">‚úñ</button>
    </div>
    <textarea id="comentario" name="comentario" placeholder="Escribe aqu√≠ tus sugerencias..." required></textarea>
    <button type="submit">Enviar</button>
    <p id="mensaje-envio"></p>
  </form>
</div>
<script>
  function toggleFeedback() {
    const panel = document.getElementById('feedback-flotante');
    const boton = document.getElementById('boton-feedback');
    panel.classList.toggle('oculto');
    boton.style.display = panel.classList.contains('oculto') ? 'block' : 'none';
  }
</script>
<script>
  function cerrarSesion() {
    alert("Has cerrado sesi√≥n.");
    window.location.href = '../Login/index.html';
  }
</script>
<script>
  document.getElementById('form-feedback').addEventListener('submit', async function(e) {
    e.preventDefault();

    const comentario = document.getElementById('comentario').value;
    const mensaje = document.getElementById('mensaje-envio');

    try {
      const respuesta = await fetch('/feedback', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'comentario=' + encodeURIComponent(comentario)
      });

      if (respuesta.ok) {
        mensaje.textContent = '‚úÖ Comentario recibido correctamente';
        mensaje.style.color = 'lightgreen';
        document.getElementById('form-feedback').reset();
      } else {
        mensaje.textContent = '‚ùå Hubo un error al enviar';
        mensaje.style.color = 'red';
      }
    } catch (error) {
      mensaje.textContent = '‚ùå Error de conexi√≥n';
      mensaje.style.color = 'red';
    }

    // Borra el mensaje despu√©s de 3 segundos
    setTimeout(() => mensaje.textContent = '', 3000);
  });
</script>

</body>
</html>
  